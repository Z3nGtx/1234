#include <stdio.h>
#include <unistd.h>    // for fork(), execve()
#include <sys/types.h> // for pid_t
#include <sys/wait.h>  // for wait()

int main() {
    pid_t pid;
    int status;

    pid = fork(); // create child process

    if (pid < 0) {
        // fork failed
        printf("Fork failed!\n");
        return 1;
    } 
    else if (pid == 0) {
        // child process
        printf("Child Process: Running 'ls' command using execve()\n");

        char *args[] = {"/bin/ls", "-l", NULL}; // command arguments
        execve("/bin/ls", args, NULL);           // replace child with /bin/ls

        // execve() runs a new program â€” if it returns, it failed
        printf("execve failed!\n");
    } 
    else {
        // parent process
        printf("Parent Process: Waiting for child to finish...\n");
        wait(&status); // wait for child to complete
        printf("Parent Process: Child finished execution.\n");
    }

    return 0;
}
